"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addDefaultAppHeaders = addDefaultAppHeaders;
exports.getToken = getToken;
exports.setToken = setToken;
const constants_1 = require("./constants");
const validators_1 = require("./validators");
const { X_ZOHO_CATALYST_ORG_ID, ZAID } = constants_1.CONSTANTS;
function addDefaultAppHeaders(headers, values) {
    headers[ZAID] = values.projectKey;
    if ((0, validators_1.isNonEmptyString)(values.orgId)) {
        headers[X_ZOHO_CATALYST_ORG_ID] = process.env.X_ZOHO_CATALYST_ORG_ID;
    }
    headers['CATALYST-COMPONENT'] = 'true';
    return headers;
}
function getToken(key) {
    let jwtAuthToken = '';
    const cookies = document.cookie.split(';');
    const cookiesLen = cookies.length;
    for (let i = 0; i < cookiesLen; i++) {
        const keyValuePairSplitted = cookies[i].split('=');
        if (keyValuePairSplitted[0].trim() === (key ? key : 'cookie')) {
            jwtAuthToken = keyValuePairSplitted[1];
        }
    }
    return jwtAuthToken;
}
function setToken(authObj, key) {
    document.cookie = `${key ? key : 'cookie'}=${authObj.access_token}; max-age=${authObj.expires_in}; path=/`;
}
