'use strict';
import { CONSTANTS } from '@zcatalyst/utils';
import { Agent as httpAgent } from 'http';
import { Agent as httpsAgent } from 'https';
const agentMap = {};
export default class RequestAgent {
    constructor(isHttps, host, replaceAgent) {
        const protocol = isHttps ? CONSTANTS.PROTOCOL.HTTPS : CONSTANTS.PROTOCOL.HTTP;
        if (agentMap[protocol] === undefined) {
            agentMap[protocol] = {};
        }
        const protocolMap = agentMap[protocol];
        if (protocolMap[host] === undefined || replaceAgent) {
            protocolMap[host] = isHttps
                ? new httpsAgent({ keepAlive: true })
                : new httpAgent({ keepAlive: true });
        }
        this.agent = protocolMap[host];
    }
}
