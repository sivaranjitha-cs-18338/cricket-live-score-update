'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("@zcatalyst/utils");
const http_1 = require("http");
const https_1 = require("https");
const agentMap = {};
class RequestAgent {
    constructor(isHttps, host, replaceAgent) {
        const protocol = isHttps ? utils_1.CONSTANTS.PROTOCOL.HTTPS : utils_1.CONSTANTS.PROTOCOL.HTTP;
        if (agentMap[protocol] === undefined) {
            agentMap[protocol] = {};
        }
        const protocolMap = agentMap[protocol];
        if (protocolMap[host] === undefined || replaceAgent) {
            protocolMap[host] = isHttps
                ? new https_1.Agent({ keepAlive: true })
                : new http_1.Agent({ keepAlive: true });
        }
        this.agent = protocolMap[host];
    }
}
exports.default = RequestAgent;
